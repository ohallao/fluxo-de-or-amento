# -*- coding: utf-8 -*-
"""Untitled22.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1CWLaZ1m2KZL8gRubGkJ55bOgmEo4-e5V
"""

import streamlit as st
import pandas as pd

# Função para gerar dados de exemplo para cada mês
def gerar_dados_exemplo():
    meses = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 
             'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro']
    dados = {mes: {
        "Receitas": 0.0, 
        "Despesas": 0.0, 
        "Investimentos": 0.0
        } for mes in meses}
    return dados

# Inicializar os dados no session_state se ainda não estiverem definidos
if 'dados_por_mes' not in st.session_state:
    st.session_state.dados_por_mes = gerar_dados_exemplo()

# Função para exibir a seção de edição de valores diretamente nas caixas
def exibir_caixas_edicao(mes, dados_mes):
    st.subheader(f'{mes}')
    
    # Campos para edição manual como se fosse uma célula do Excel
    dados_mes['Receitas'] = st.text_input(f"Receitas de {mes}", value=str(dados_mes['Receitas']), key=f"receitas_{mes}")
    dados_mes['Despesas'] = st.text_input(f"Despesas de {mes}", value=str(dados_mes['Despesas']), key=f"despesas_{mes}")
    dados_mes['Investimentos'] = st.text_input(f"Investimentos de {mes}", value=str(dados_mes['Investimentos']), key=f"investimentos_{mes}")
    
    # Atualizar os dados no estado da sessão
    st.session_state.dados_por_mes[mes] = dados_mes

# Página inicial com as caixas dos meses
st.title('Planejamento Financeiro - Meses do Ano')

st.subheader('Clique em um mês para editar seus valores manualmente')

# Exibir os meses em "caixas" ou botões para clicar
col1, col2, col3 = st.columns(3)
meses = list(st.session_state.dados_por_mes.keys())

for i, mes in enumerate(meses):
    col = [col1, col2, col3][i % 3]  # Distribuir os meses entre as colunas
    with col:
        with st.expander(mes):
            exibir_caixas_edicao(mes, st.session_state.dados_por_mes[mes])

# Exibir os dados atualizados para cada mês
st.subheader('Resumo dos Meses Atualizados')
for mes, dados in st.session_state.dados_por_mes.items():
    st.write(f"{mes} - Receitas: R$ {dados['Receitas']}, Despesas: R$ {dados['Despesas']}, Investimentos: R$ {dados['Investimentos']}")
